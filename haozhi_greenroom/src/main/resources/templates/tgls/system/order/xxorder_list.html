<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">

<head th:replace="public :: head">
</head>

<body>
<div class="cBody">
    <table class="layui-table">
        <thead>
        <tr>
            <th>用户</th>
            <th>订单号</th>
            <th>商标名称</th>
            <th>商标服务</th>
            <th>服务费</th>
            <th>官费</th>
            <th>订单数量</th>
            <th>合计</th>
            <th>备注</th>
            <th>创建时间</th>
            <th>状态</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
    <!-- layUI 分页模块 -->
    <div id="pages"></div>
    <script >
        ajaxFun(1, 10);

        function ajaxFun(page, rows) {
            $.ajax({
                url: "/order/xx",
                type: 'POST',
                data: {
                    page: page,
                    rows: rows
                },
                success(res) {
                    var html = '';
                    $.each(res.rows, function (index, ele) {
                        let zfState = '';
                        let zfBtn = '';
                        if (ele.state === 1){
                            zfState = '            <td style="color: red">支付待确认</td>';
                            zfBtn =                             '                <button class="layui-btn  layui-btn-xs" data-id="'+ele.id+'"'+
                                '                        onclick="update_But(this)">确认'+
                                '                </button>';
                        }else if (ele.state === 2){
                            zfState = '            <td style="color: green">支付待审核</td>';
                            zfBtn =                             '                <button class="layui-btn  layui-btn-xs" data-id="'+ele.id+'"'+
                                '                        onclick="update_Sh_But(this)">审核'+
                                '                </button>';
                        }

                        html += ' <tr>'+
                            '            <td>'+ele.userId+'</td>'+
                            '            <td >'+ele.id+'</td>'+
                            '            <td>'+ele.title+'</td>'+
                            '            <td >'+ele.sbName+'</td>'+
                            '            <td >'+ele.doubleFwPrice+'</td>'+
                            '            <td>'+ele.doubleGfPrice+'</td>'+
                            '            <td>'+ele.number+'</td>'+
                            '            <td >'+ele.doublePrice+'</td>'+
                            '            <td >'+ele.remark+'</td>'+
                            '            <td >'+ele.stime+'</td>'+
                            zfState+
                            '            <td>'+
                            zfBtn               +
                            '                <button class="layui-btn  layui-btn-xs" data-id="'+ele.id+'" onclick="look_But(this)">查看'+
                            '                </button>'+
                            '            </td>'+
                            '        </tr>';
                    });
                    $('tbody').empty().html(html);
                    listPage(res.total, page);
                }
            })
        }

        function listPage(total, page) {
            layui.use('laypage', function () {
                var laypage = layui.laypage;
                var limits = total / 10;
                //总页数大于页码总数
                laypage.render({
                    elem: 'pages'
                    , count: total,
                    limit: 10,
                    curr: page
                    , layout: ['count', 'prev', 'page', 'next']
                    , jump: function (obj, first) {
                        if (!first) {
                            ajaxFun(obj.curr, 10);
                        }
                    }
                });
            });
        }
        function update_But(e) {
            var id = $(e).data("id");
            location.href = "/order/xx/update?id=" + id;
        }

        function update_Sh_But(e) {
            var id = $(e).data("id");
            location.href = "/order/xx/update/sh?id=" + id;
        }

        function look_But(e) {
            var id = $(e).data("id");
            location.href = "/order/xx/view?id=" + id;
        }
    </script>
</div>


</body>

</html>